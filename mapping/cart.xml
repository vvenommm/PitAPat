<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap 
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	 "http://ibatis.apache.org/dtd/sql-map-2.dtd">
	 
<!--이 문서는 iBatis에서 처리하여 실행할 SQL문을 작성하는 문서입니다. -->
<sqlMap namespace = "cart">

<!-- 	//1. 모든 카트 상품 가져오기 -->
	<select id="getAllCart" resultClass="cart">
		SELECT * FROM CART
	</select>
	
<!-- 	//2. 미결인 모든 상품 가져오기 -->
	<select id="inCart" resultClass="cart">
		SELECT * FROM CART WHERE CART_PAY = 'N'
	</select>
	
<!-- 	//3. 결제한 모든 상품 상세 조회 -->
	<select id="payedCart" resultClass="cart">
		SELECT * FROM CART WHERE CART_PAY = 'Y'
	</select>
	
	
<!-- 	////////////////////////////////////////////////////////// -->

<!-- 	//4-1. 손님이 원하는 상품 넣기 - 장바구니 비었을 때 첫 상품 -->
<!-- 	이거 ITERATE 사용하기!!!!!!!!!!!!!!!!!!!!! -->
	<insert id="putInCart" parameterClass="list">
		INSERT INTO CART VALUES(CART_NO = #CART_NO#, MEM_ID = #MEM_ID#, CART_STATUS = '미결', EDU_NO = #EDU_NO#, KIN_CODE = #KIN_CODE#, CLS_NO = #CLS_NO#, PAY_NO = #PAY_NO#)
	</insert>

<!-- 	//4-2-1. 장바구니에 이미 있고 다른 상품 추가하기 - 온라인	 -->
<!-- 	<update id="addInCart" parameterClass=""> -->
	
<!-- 	</update> -->

<!-- 	//4-2-2. 장바구니에 이미 있고 다른 상품 추가하기 - 오프라인	 -->


<!-- 	//4-2-3. 장바구니에 이미 있고 다른 상품 추가하기 - 유치원	 -->

<!-- 	////////////////////////////////////////////////////////// -->

<!-- 	//5. 결제 취소 -->
	<update id="payCancel" parameterClass="pay">
		UPDATE CART SET CART_STATUS = '취소' WHERE PAY_NO = #PAY_NO#
	</update> 



</sqlMap>
